<div class="container mt-5">
  <div class="row">
    <div class="col-md-12">
      <div class="card mb-4">
        <div class="card-header bg-primary text-white">
          <h3 class="mb-0">Staff Dashboard</h3>
        </div>
        <div class="card-body">
          <div class="row">
            <div class="col-md-4 mb-4">
              <div class="card h-100">
                <div class="card-body text-center">
                  <i class="bi bi-cash-coin" style="font-size: 3rem; color: #28a745;"></i>
                  <h4 class="mt-3">Cashier Interface</h4>
                  <p>Sell kicks, manage queue tickets, and process payments</p>
                  <a href="/cashier" class="btn btn-success">Go to Cashier</a>
                </div>
              </div>
            </div>
            
            <div class="col-md-4 mb-4">
              <div class="card h-100">
                <div class="card-body text-center">
                  <i class="bi bi-flag" style="font-size: 3rem; color: #007bff;"></i>
                  <h4 class="mt-3">Referee Interface</h4>
                  <p>Log goals, manage players, and track competition</p>
                  <a href="/referee" class="btn btn-primary">Go to Referee</a>
                </div>
              </div>
            </div>
            
            <div class="col-md-4 mb-4">
              <div class="card h-100">
                <div class="card-body text-center">
                  <i class="bi bi-pencil-square" style="font-size: 3rem; color: #6c757d;"></i>
                  <h4 class="mt-3">Name Change</h4>
                  <p>Update player names (up to 2 changes allowed)</p>
                  <a href="/staff/name-change" class="btn btn-secondary">Change Names</a>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      
      <!-- Queue Status -->
      <div class="card mb-4">
        <div class="card-header bg-info text-white">
          <h5 class="mb-0">Current Queue Status</h5>
        </div>
        <div class="card-body">
          <div class="row">
            <div class="col-md-6">
              <div class="alert alert-info">
                <h5>Now Serving</h5>
                <h2 id="current-queue-number"><%= currentQueuePosition || 'No active tickets' %></h2>
              </div>
            </div>
            <div class="col-md-6">
              <div class="alert alert-warning">
                <h5>Next Ticket</h5>
                <h2 id="next-ticket-number"><%= nextTicket %></h2>
              </div>
            </div>
          </div>
        </div>
      </div>
      
      <!-- Today's Staff -->
      <div class="card">
        <div class="card-header bg-secondary text-white">
          <h5 class="mb-0">Today's Staff on Duty</h5>
        </div>
        <div class="card-body">
          <div class="row">
            <% if (staffOnDuty && staffOnDuty.length > 0) { %>
              <% staffOnDuty.forEach(staff => { %>
                <div class="col-md-4 mb-3">
                  <div class="card h-100">
                    <div class="card-body">
                      <h5 class="card-title"><%= staff.name %></h5>
                      <p class="card-text">
                        <span class="badge 
                          <%= staff.duty_role === 'cashier' ? 'bg-primary' : 
                             staff.duty_role === 'referee' ? 'bg-success' : 
                             'bg-info' %>">
                          <%= staff.duty_role.charAt(0).toUpperCase() + staff.duty_role.slice(1) %>
                        </span>
                      </p>
                    </div>
                  </div>
                </div>
              <% }); %>
            <% } else { %>
              <div class="col-12">
                <p class="text-center">No staff on duty today</p>
              </div>
            <% } %>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<script>
  // Auto-refresh queue status every 10 seconds
  setInterval(function() {
    fetch('/api/queue/current')
      .then(response => response.json())
      .then(data => {
        if (data.currentQueuePosition) {
          document.getElementById('current-queue-number').textContent = data.currentQueuePosition;
        } else {
          document.getElementById('current-queue-number').textContent = 'No active tickets';
        }
      })
      .catch(error => console.error('Error updating queue position:', error));
  }, 10000);
</script>