<div class="container mt-5">
  <div class="row">
    <div class="col-md-12">
      <div class="card mb-4">
        <div class="card-header bg-primary text-white">
          <div class="d-flex justify-content-between align-items-center">
            <h3 class="mb-0"><%= team.name %> Dashboard</h3>
            <% if (isMember) { %>
              <form action="/teams/leave" method="POST" onsubmit="return confirm('Are you sure you want to leave this team?');">
                <button type="submit" class="btn btn-sm btn-light">Leave Team</button>
              </form>
            <% } %>
          </div>
        </div>
        <div class="card-body">
          <!-- Team Stats -->
          <div class="row mb-4">
            <div class="col-md-4">
              <div class="card text-center">
                <div class="card-body">
                  <h5 class="card-title">Total Goals</h5>
                  <h2><%= stats.total_goals || 0 %></h2>
                </div>
              </div>
            </div>
            <div class="col-md-4">
              <div class="card text-center">
                <div class="card-body">
                  <h5 class="card-title">Total Attempts</h5>
                  <h2><%= stats.total_attempts || 0 %></h2>
                </div>
              </div>
            </div>
            <div class="col-md-4">
              <div class="card text-center">
                <div class="card-body">
                  <h5 class="card-title">Accuracy</h5>
                  <h2><%= stats.total_attempts ? ((stats.total_goals / stats.total_attempts) * 100).toFixed(1) : 0 %>%</h2>
                </div>
              </div>
            </div>
          </div>
          
          <!-- Session History -->
          <div class="mt-4">
            <h4>Session History</h4>
            <div class="table-responsive">
              <table class="table table-hover">
                <thead>
                  <tr>
                    <th>Date</th>
                    <th>Goals</th>
                    <th>Attempts</th>
                    <th>Accuracy</th>
                  </tr>
                </thead>
                <tbody>
                  <% if (typeof sessionStats !== 'undefined' && sessionStats && sessionStats.length > 0) { %>
                    <% sessionStats.forEach(session => { %>
                      <tr>
                        <td><%= new Date(session.session_date).toLocaleDateString() %></td>
                        <td><%= session.total_goals %></td>
                        <td><%= session.total_attempts %></td>
                        <td><%= (session.accuracy * 100).toFixed(1) %>%</td>
                      </tr>
                    <% }); %>
                  <% } else { %>
                    <tr>
                      <td colspan="4" class="text-center">No team sessions recorded</td>
                    </tr>
                  <% } %>
                </tbody>
              </table>
            </div>
          </div>
          
          <!-- Team Members -->
          <h4 class="mt-4">Team Members</h4>
          <div class="table-responsive">
            <table class="table table-hover">
              <thead>
                <tr>
                  <th>Name</th>
                  <th>Role</th>
                  <th>District</th>
                  <th>Age Group</th>
                  <th>Goals</th>
                  <th>Joined</th>
                </tr>
              </thead>
              <tbody>
                <% if (members && members.length > 0) { %>
                  <% members.forEach(member => { %>
                    <tr>
                      <td><%= member.name %></td>
                      <td><%= member.is_captain ? 'Captain' : 'Member' %></td>
                      <td><%= member.residence %></td>
                      <td><%= member.age_group %></td>
                      <td><%= member.goals || 0 %></td>
                      <td><%= new Date(member.joined_at).toLocaleDateString() %></td>
                    </tr>
                  <% }); %>
                <% } else { %>
                  <tr>
                    <td colspan="6" class="text-center">No members found</td>
                  </tr>
                <% } %>
              </tbody>
            </table>
          </div>
          
          <div class="mt-4">
            <a href="/teams/compare" class="btn btn-primary">Compare with Other Teams</a>
            <a href="/teams/browse" class="btn btn-outline-secondary ms-2">Browse All Teams</a>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>