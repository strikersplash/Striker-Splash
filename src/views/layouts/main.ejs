<!DOCTYPE html>
<html lang="en" class="h-100">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes"
    />
    <title>
      <%= typeof title !== 'undefined' ? title : 'Striker Splash' %>
    </title>
    <!-- Bootstrap CSS -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <!-- Bootstrap Icons -->
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.8.1/font/bootstrap-icons.css"
    />
    <!-- Font Awesome Icons -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <!-- Custom CSS -->
    <link rel="stylesheet" href="/css/style.css" />
    <link rel="stylesheet" href="/css/competition-modal-fix.css" />
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }
      html {
        height: 100%;
      }
      body {
        min-height: 100vh;
        display: flex;
        flex-direction: column;
        margin: 0;
        padding: 0;
        line-height: 1.4;
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
      }
      main {
        flex: 1 0 auto;
        margin: 0 !important;
        padding: 0 !important;
      }
      .navbar {
        margin-bottom: 0 !important;
        border-bottom: none !important;
        min-height: 56px;
        padding-top: 0.5rem;
        padding-bottom: 0.5rem;
        z-index: 1030;
      }

      /* Enhanced mobile navbar */
      @media (max-width: 991px) {
        .navbar {
          min-height: 60px;
          padding-top: 0.75rem;
          padding-bottom: 0.75rem;
        }

        .navbar-toggler {
          border: none;
          padding: 0.25rem 0.5rem;
          font-size: 1.1rem;
        }

        .navbar-toggler:focus {
          box-shadow: none;
        }

        .navbar-collapse {
          margin-top: 0.5rem;
        }

        .navbar-nav {
          background: rgba(255, 255, 255, 0.95);
          border-radius: 8px;
          padding: 0.5rem 0;
          margin-top: 0.5rem;
          box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }

        .navbar-nav .nav-link {
          color: #333 !important;
          padding: 0.75rem 1rem;
          border-radius: 4px;
          margin: 0 0.5rem;
        }

        .navbar-nav .nav-link:hover {
          background: rgba(0, 123, 255, 0.1);
        }

        .navbar-nav .dropdown-menu {
          background: white;
          border: 1px solid #dee2e6;
          box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
          border-radius: 8px;
          margin-top: 0.25rem;
        }

        .navbar-nav .dropdown-item {
          padding: 0.75rem 1rem;
          color: #333;
        }

        .navbar-nav .dropdown-item:hover {
          background: rgba(0, 123, 255, 0.1);
        }
      }

      /* Desktop navbar */
      @media (min-width: 992px) {
        .navbar {
          min-height: 64px;
          padding-top: 0.75rem;
          padding-bottom: 0.75rem;
        }
      }

      .navbar .navbar-brand {
        font-size: 1.25rem;
        font-weight: 600;
      }

      @media (min-width: 768px) {
        .navbar .navbar-brand {
          font-size: 1.5rem;
        }
      }

      .navbar .nav-link {
        font-size: 1rem;
        padding-top: 0.5rem;
        padding-bottom: 0.5rem;
      }

      @media (min-width: 992px) {
        .navbar .nav-link {
          font-size: 1.15rem;
        }
      }

      .hero-section {
        margin-top: 0 !important;
      }

      /* Enhanced container responsiveness */
      .container-fluid,
      .container {
        padding-left: 0.75rem;
        padding-right: 0.75rem;
      }

      @media (min-width: 576px) {
        .container-fluid,
        .container {
          padding-left: 1rem;
          padding-right: 1rem;
        }
      }

      @media (min-width: 992px) {
        .container-fluid,
        .container {
          padding-left: 1.5rem;
          padding-right: 1.5rem;
        }
      }

      footer {
        margin-top: auto;
        flex-shrink: 0;
        margin-bottom: 0 !important;
        padding-bottom: 0 !important;
      }
      .footer-copyright {
        margin-bottom: 0 !important;
        padding-bottom: 1rem !important;
      }

      /* Loading states */
      .page-loading {
        display: flex;
        justify-content: center;
        align-items: center;
        min-height: 200px;
        font-size: 1.1rem;
        color: #666;
      }

      /* Touch improvements */
      @media (hover: none) and (pointer: coarse) {
        .btn:hover {
          transform: none;
        }

        .card:hover {
          transform: none;
        }
      }
    </style>
  </head>
  <body class="d-flex flex-column h-100">
    <!-- Navbar -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-primary">
      <div class="container">
        <a class="navbar-brand" href="/">Striker Splash</a>
        <button
          class="navbar-toggler"
          type="button"
          data-bs-toggle="collapse"
          data-bs-target="#navbarNav"
        >
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNav">
          <ul class="navbar-nav me-auto">
            <li class="nav-item">
              <a class="nav-link" href="/leaderboard">Leaderboard</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="/about">About Us</a>
            </li>
          </ul>
          <ul class="navbar-nav">
            <% if (user) { %> <% if (user.role === 'player') { %>
            <li class="nav-item dropdown">
              <a
                class="nav-link dropdown-toggle"
                href="#"
                id="playerDropdown"
                role="button"
                data-bs-toggle="dropdown"
              >
                My Account
              </a>
              <ul class="dropdown-menu dropdown-menu-end">
                <li>
                  <a class="dropdown-item" href="/player/dashboard"
                    >My Dashboard</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
                <li><a class="dropdown-item" href="/auth/logout">Logout</a></li>
              </ul>
            </li>
            <% } else if (user.role === 'admin') { %>
            <li class="nav-item dropdown">
              <a
                class="nav-link dropdown-toggle"
                href="#"
                id="adminDropdown"
                role="button"
                data-bs-toggle="dropdown"
              >
                Admin
              </a>
              <ul class="dropdown-menu dropdown-menu-end">
                <li>
                  <a class="dropdown-item" href="/admin/dashboard"
                    >Admin Dashboard</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
                <li><a class="dropdown-item" href="/auth/logout">Logout</a></li>
              </ul>
            </li>
            <% } else if (user.role === 'staff') { %>
            <li class="nav-item dropdown">
              <a
                class="nav-link dropdown-toggle"
                href="#"
                id="staffDropdown"
                role="button"
                data-bs-toggle="dropdown"
                aria-expanded="false"
              >
                Staff Member
              </a>
              <ul
                class="dropdown-menu dropdown-menu-end"
                aria-labelledby="staffDropdown"
              >
                <li>
                  <a class="dropdown-item" href="/staff/interface"
                    >Staff Dashboard</a
                  >
                </li>
                <li>
                  <a class="dropdown-item" href="/cashier">Cashier Interface</a>
                </li>
                <li>
                  <a class="dropdown-item" href="/referee">Referee Interface</a>
                </li>
                <li>
                  <a class="dropdown-item" href="/staff/competition-setup"
                    >Competition Setup</a
                  >
                </li>
                <li>
                  <a
                    class="dropdown-item"
                    href="/staff/event-registration-management"
                  >
                    Event Registration
                  </a>
                </li>
                <li>
                  <a class="dropdown-item" href="/staff/name-change"
                    >Edit User Profile</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
                <li><a class="dropdown-item" href="/auth/logout">Logout</a></li>
              </ul>
            </li>
            <% } else if (user.role === 'sales') { %>
            <li class="nav-item dropdown">
              <a
                class="nav-link dropdown-toggle"
                href="#"
                id="salesDropdown"
                role="button"
                data-bs-toggle="dropdown"
                aria-expanded="false"
              >
                Sales User
              </a>
              <ul
                class="dropdown-menu dropdown-menu-end"
                aria-labelledby="salesDropdown"
              >
                <li>
                  <a class="dropdown-item" href="/cashier">Cashier Interface</a>
                </li>
                <li><hr class="dropdown-divider" /></li>
                <li><a class="dropdown-item" href="/auth/logout">Logout</a></li>
              </ul>
            </li>
            <% } else { %>
            <li class="nav-item">
              <a class="nav-link" href="/auth/logout">Logout</a>
            </li>
            <% } %> <% } else { %>
            <li class="nav-item">
              <a class="nav-link" href="/auth/login">Login</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="/auth/register">Register</a>
            </li>
            <% } %>
          </ul>
        </div>
      </div>
    </nav>

    <!-- Flash Messages -->
    <div class="container-fluid mt-3 px-1 px-sm-2">
      <% if(success_msg && success_msg.length > 0) { %>
      <div class="alert alert-success alert-dismissible fade show">
        <%= success_msg %>
        <button
          type="button"
          class="btn-close"
          data-bs-dismiss="alert"
        ></button>
      </div>
      <% } %> <% if(error_msg && error_msg.length > 0) { %>
      <div class="alert alert-danger alert-dismissible fade show">
        <%= error_msg %>
        <button
          type="button"
          class="btn-close"
          data-bs-dismiss="alert"
        ></button>
      </div>
      <% } %>
    </div>

    <!-- Main Content -->
    <main class="flex-shrink-0 w-100"><%- body %></main>

    <!-- Footer -->
    <footer class="footer mt-auto py-3 bg-dark text-light">
      <div class="container p-4">
        <div class="row">
          <div class="col-lg-4 col-md-6 mb-4 mb-md-0">
            <h5 class="text-uppercase">Striker Splash</h5>
            <p>
              The ultimate football challenge for all ages. Test your skills and
              compete for prizes!
            </p>
          </div>

          <div class="col-lg-4 col-md-6 mb-4 mb-md-0">
            <h5 class="text-uppercase">Links</h5>
            <ul class="list-unstyled mb-0">
              <li><a href="/" class="text-light">Home</a></li>
              <li><a href="/leaderboard" class="text-light">Leaderboard</a></li>
              <li><a href="/about" class="text-light">About Us</a></li>
            </ul>
          </div>

          <div class="col-lg-4 col-md-12 mb-4 mb-md-0">
            <h5 class="text-uppercase">Contact</h5>
            <p>
              <i class="bi bi-envelope-fill me-2"></i
              ><a href="mailto:strikersplasbz@gmail.com" class="text-light"
                >strikersplasbz@gmail.com</a
              >
            </p>
            <p>
              <i class="bi bi-facebook me-2"></i
              ><a
                href="https://www.facebook.com/profile.php?id=61569888750338"
                class="text-light"
                target="_blank"
                >Follow us on Facebook</a
              >
            </p>
          </div>
        </div>
      </div>
    </footer>

    <!-- Chart.js for admin sales reports -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    <!-- Custom JS -->
    <script src="/js/main.js"></script>

    <!-- Content Editor for Admin Users -->
    <% if (locals.user && locals.user.role === 'admin') { %>
    <script src="/js/content-editor.js"></script>
    <% } %>
  </body>
</html>
